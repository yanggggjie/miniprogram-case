<view class="page">
  <block wx:if="{{!isFixMode}}">
    <scroll-view
      style="height: {{scrollViewHeight}}px;"
      scroll-y="{{true}}"
      scroll-top="{{scrollTop}}"
      bindscroll="onScroll"
      scroll-anchoring="{{true}}"
      bounces="{{false}}"
      enhanced="{{true}}"
    >
      <view wx:for="{{msgList}}" wx:key="id" class="msg-row {{item.isMe ? 'msg-right' : 'msg-left'}}">
        <view class="avatar {{item.isMe ? 'avatar-me' : 'avatar-other'}}">{{item.isMe ? '我' : 'Ta'}}</view>
        <view class="msg-bubble {{item.isMe ? 'bubble-me' : 'bubble-other'}}">{{item.text}}</view>
      </view>
    </scroll-view>
  </block>

  <block wx:elif="{{isFixMode}}">
    <scroll-view
      style="height: {{scrollViewHeight}}px;"
      scroll-y="{{true}}"
      scroll-top="{{scrollTop}}"
      bindscroll="onScroll"
      throttle="{{false}}"
      scroll-anchoring="{{true}}"
      bounces="{{false}}"
      enhanced="{{true}}"
    >
      <view wx:for="{{msgList}}" wx:key="id" class="msg-row {{item.isMe ? 'msg-right' : 'msg-left'}}">
        <view class="avatar {{item.isMe ? 'avatar-me' : 'avatar-other'}}">{{item.isMe ? '我' : 'Ta'}}</view>
        <view class="msg-bubble {{item.isMe ? 'bubble-me' : 'bubble-other'}}">{{item.text}}</view>
      </view>
    </scroll-view>
  </block>

  <view class="scroll-top-display">scrollTop: {{displayScrollTop}}</view>
  <view class="float-btn" bindtap="toggleMode">{{isFixMode ? "bug" : "fix"}}</view>
</view>
